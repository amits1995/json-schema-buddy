app.controller("mainCtrl",["$scope","$http","Schemaservice",function(n,t,i){function u(){r.user_defined_options=user_defined_options;window.on(window.Editors_Initialized,function(){r.schemaEditor=window.editors["schema-editor"];r.jsonEditor=window.editors["json-editor"];for(key in window.editors)if(window.editors.hasOwnProperty(key)){var n=window.editors[key],t=beautify(n.getValue());n.setValue(t,-1);n.setOption("enableBasicAutocompletion",!0)}})}var r=this;r.showJsonEditor=!0;r.openChildWindow=function(){r.showJsonEditor=!1;var n=window.open(window.location.href+"#/Json/");r.childWindow=n;n.addEventListener("message",function(){n.on(Generate_Schema,function(n){var t=n.getValue();isValidJSON(t)?r.generateSchemas(t):toastr.error("Your json is not valid")});n.on(Validate_Schema,function(n){var t=r.schemaEditor;r.validateSchemas(n,t)});trigger(Editor_Created,n.editors["json-editor"]);n.on(Editor_Created,function(){n.editors["json-editor"].setValue(r.jsonEditor.getValue(),-1)});n.trigger(Editor_Created,r.schemaEditor)})};r.generateSchema=function(){if(r.showJsonEditor){var t=r.jsonEditor,n=t.getValue();isValidJSON(n)?r.generateSchemas(n):toastr.error("Your json is not valid")}else r.childWindow.trigger(Generate_Schema_Requested)};r.generateSchemas=function(n){r.user_defined_options.json=JSON.parse(n);i.JSON2Schema();var t=i.schema,u=r.schemaEditor;u.setValue(beautify(JSON.stringify(t)),-1)};r.validateSchema=function(){r.showJsonEditor?r.validateSchemas(r.jsonEditor,r.schemaEditor):r.childWindow.trigger(Validate_Schema_Requested)};r.validateSchemas=function(n,t){var i=n.getValue(),r=t.getValue();if(!isValidJSON(i)){toastr.error("json syntax error");return}if(!isValidJSON(r)){toastr.error("schema syntax error");return}var u=JSON.parse(i),f=JSON.parse(r),e=tv4.validate(u,f);e?toastr.success("Validation passed successfully","Json Schema"):toastr.error("Validation Failed:\nmessage: "+tv4.error.message+"\ndata path: "+tv4.error.dataPath+"\nschema path: "+tv4.error.schemaPath)};r.toggleOptions=function(){$("#OptionsModal").modal("toggle")};u()}]);
//# sourceMappingURL=main-controller.min.js.map
